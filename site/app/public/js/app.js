!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);r(1),r(2)},function(e,t){function r(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(200==this.status&&4==this.readyState){for(var e=document.querySelector("#order-table-body");e.firstChild;)e.removeChild(e.firstChild);!function(e){var t=document.querySelector("#order-table-body");e.data.forEach(function(e){var r=document.createElement("tr");r.setAttribute("data-client",e.client._id),r.setAttribute("data-facility",e.facility._id),r.innerHTML="<td>"+e.client.name+"</td><td>"+e.facility.location.initials.toLowerCase()+"-facility-"+e.facility.number+"</td><td>"+e.product+'</td><td><button title="Excluir" class="btn-remove-order" data-order="'+e._id+'">X</button></td>',t.appendChild(r)}),Array.prototype.slice.call(document.querySelectorAll(".btn-remove-order")).forEach(function(e){e.addEventListener("click",function(){!function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){200==this.status&&4==this.readyState&&r()},t.open("DELETE","http://localhost:3000/api/order",!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify(e))}({id:this.dataset.order})})})}(JSON.parse(this.response))}},e.open("GET","http://localhost:3000/api/order",!0),e.setRequestHeader("Accept","application/json"),e.send()}function n(e,t){var r=t.children.length;if("all"!=e){for(var n=o(e,JSON.parse(localStorage.getItem("clients"))),a=1;a<r;a++)t.removeChild(t.children[1]);n.facilities.forEach(function(e){var r=document.createElement("option");r.setAttribute("value",e._id),r.innerHTML=e.location.initials.toLowerCase()+"-facility-"+e.number,t.appendChild(r)})}else for(a=1;a<r;a++)t.removeChild(t.children[1])}function o(e,t){for(var r=0;r<t.length;r++)if(t[r]._id==e)return t[r]}function a(e,t){if("all"!=e)for(var r=0;r<t.length;r++)t[r].dataset.client!=e?t[r].style.display="none":t[r].removeAttribute("style");else for(r=0;r<t.length;r++)t[r].removeAttribute("style")}function i(e,t){for(var r=o(e,JSON.parse(localStorage.getItem("clients"))),n=t.children.length,a=0;a<n;a++)t.removeChild(t.children[0]);r.facilities.forEach(function(e){var r=document.createElement("option");r.innerHTML=e.location.initials.toLowerCase()+"-facility-"+e.number,r.setAttribute("value",e._id),t.appendChild(r)})}function c(){var e=document.querySelector(".add-order-modal"),t=document.querySelector(".modal-bg");"add-order-modal"==e.className?(e.setAttribute("class","add-order-modal visible"),t.setAttribute("class","modal-bg visible")):(e.setAttribute("class","add-order-modal"),t.setAttribute("class","modal-bg"))}"/ordem"==window.location.pathname&&(r(),function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(200==this.status&&4==this.readyState){var e=JSON.parse(this.response);localStorage.setItem("clients",JSON.stringify(e.data)),function(e){var t=document.querySelector(".client-select"),r=document.querySelector(".facility-select"),o=document.querySelector("#order-table-body").children,c=document.forms.newOrderForm.client,l=document.forms.newOrderForm.storage;e.data.forEach(function(e){var r=document.createElement("option");r.innerHTML=e.name,r.setAttribute("value",e._id),t.appendChild(r);var n=r.cloneNode(!0);c.appendChild(n)}),t.addEventListener("change",function(){"all"!=this.value?(n(this.value,r),r.removeAttribute("disabled"),a(this.value,o)):(n(this.value,r),a(this.value,o),r.setAttribute("disabled","disabled"))}),r.addEventListener("change",function(){!function(e,t,r){var n=Array.prototype.slice.call(r).filter(function(e){return e.dataset.client==t});"all"!=e?n.forEach(function(t){t.dataset.facility!=e?t.style.display="none":t.removeAttribute("style")}):n.forEach(function(e){e.removeAttribute("style")})}(this.value,t.value,o)}),c.addEventListener("change",function(){i(this.value,l)}),i(c.children[0].value,l)}(e)}},e.open("GET","http://localhost:3000/api/client",!0),e.setRequestHeader("Accept","application/json"),e.send()}(),localStorage.setItem("orderSendProgress","false")),document.querySelector(".btn-open-modal")&&(document.querySelector(".btn-open-modal").addEventListener("click",c),document.querySelector(".btn-close-modal").addEventListener("click",c),document.querySelector(".modal-bg").addEventListener("click",c),document.forms.newOrderForm.onsubmit=function(){if("false"==localStorage.getItem("orderSendProgress")){localStorage.setItem("orderSendProgress","true");var e=/\S/,t={client:document.forms.newOrderForm.client.value,facility:document.forms.newOrderForm.storage.value,product:document.forms.newOrderForm.product.value},n=document.querySelector(".form-message");e.test(t.client)&&e.test(t.facility)&&e.test(t.product)?function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(200==this.status&&4==this.readyState){var e=document.querySelector(".form-message"),t=JSON.parse(this.response);t.success&&(e.removeAttribute("style"),e.innerHTML=t.message,setTimeout(function(){localStorage.setItem("orderSendProgress","false"),r(),c(),e.innerHTML=""},2e3))}},n.open("POST",e,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(t))}(this.action,t):(n.innerHTML="Preencha todos os campos",n.style.color="red",localStorage.setItem("orderSendProgress","false"))}return!1})},function(e,t){"/armazem"==window.location.pathname&&function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){200==this.status&&4==this.readyState&&function(e){var t=document.querySelector("#storage-table-body");e.data.forEach(function(e){var r=document.createElement("tr");r.innerHTML="<td>"+e.owner.name+"</td><td>"+e.location.initials.toLowerCase()+"-facility-"+e.number+"</td>",t.appendChild(r)})}(JSON.parse(this.response))},e.open("GET","http://localhost:3000/api/facility",!0),e.setRequestHeader("accept","application/json"),e.send()}()}]);